{{define "customers/list.html"}}
<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>{{.Title}} - ë°±ì˜¤í”¼ìŠ¤</title>
    <link rel="stylesheet" href="/static/css/style.css">
</head>
<body>
    {{template "sidebar" .}}
    
    <div class="main-wrapper">
        {{template "header" .}}
        
        <main class="content">
<!-- ê²€ìƒ‰ ë° í•„í„° -->
<div class="content-card">
    <div class="search-section">
        <div class="search-filters">
            <div class="filter-group">
                <label>ê²€ìƒ‰ì–´</label>
                <input type="text" placeholder="ê³ ê°ëª…, ì „í™”ë²ˆí˜¸, ì´ë©”ì¼" class="search-input">
            </div>
            <div class="filter-group">
                <label>ìƒíƒœ</label>
                <select class="filter-select">
                    <option>ì „ì²´</option>
                    <option>ì •ìƒ</option>
                    <option>íœ´ë©´</option>
                    <option>íƒˆí‡´</option>
                </select>
            </div>
            <div class="filter-group">
                <label>ë“±ë¡ì¼</label>
                <input type="date" class="filter-input">
            </div>
            <div class="filter-actions">
                <button class="btn-search">ğŸ” ê²€ìƒ‰</button>
                <button class="btn-reset">ğŸ”„ ì´ˆê¸°í™”</button>
            </div>
        </div>
        <div class="action-buttons">
            <a href="/customers/add" class="btn-primary">â• ê³ ê° ì¶”ê°€</a>
            <button class="btn-secondary">ğŸ“¥ ì—‘ì…€ ë‹¤ìš´ë¡œë“œ</button>
        </div>
    </div>
</div>

<!-- ê³ ê° í…Œì´ë¸” -->
<div class="content-card">
    <div class="table-header">
        <div class="table-info">
            <span>ì´ <strong>{{len .Customers}}</strong>ëª…</span>
        </div>
    </div>
    
    <div class="table-wrapper">
        <table class="data-table">
            <thead>
                <tr>
                    <th><input type="checkbox"></th>
                    <th>ê³ ê°ë²ˆí˜¸</th>
                    <th>ì´ë¦„</th>
                    <th>ì „í™”ë²ˆí˜¸</th>
                    <th>ì´ë©”ì¼</th>
                    <th>ìƒíƒœ</th>
                    <th>ê°€ì…ì¼</th>
                    <th>ìµœê·¼ë°©ë¬¸</th>
                    <th>ê´€ë¦¬</th>
                </tr>
            </thead>
            <tbody>
                {{range .Customers}}
                <tr>
                    <td><input type="checkbox"></td>
                    <td>{{.ID}}</td>
                    <td><strong>{{.Name}}</strong></td>
                    <td>{{.Phone}}</td>
                    <td>{{.Email}}</td>
                    <td><span class="status-badge status-active">{{.Status}}</span></td>
                    <td>{{.RegisterDate}}</td>
                    <td>{{.LastVisit}}</td>
                    <td>
                        <a href="/customers/detail?id={{.ID}}" class="btn-table-action">ìƒì„¸</a>
                        <a href="/customers/edit?id={{.ID}}" class="btn-table-action">ìˆ˜ì •</a>
                        <button class="btn-table-action" onclick="openResponseModal({{.ID}}, '{{.Name}}', '{{.Phone}}')">ì‘ëŒ€</button>
                    </td>
                </tr>
                {{end}}
            </tbody>
        </table>
    </div>

    <!-- í˜ì´ì§€ë„¤ì´ì…˜ -->
    <div class="pagination">
        <button class="page-btn">â—€</button>
        <button class="page-btn active">1</button>
        <button class="page-btn">2</button>
        <button class="page-btn">3</button>
        <button class="page-btn">4</button>
        <button class="page-btn">5</button>
        <button class="page-btn">â–¶</button>
    </div>
</div>

<!-- ì‘ëŒ€ ëª¨ë‹¬ -->
<div id="responseModal" class="modal">
    <div class="modal-content">
        <div class="modal-header">
            <h3>ê³ ê° ì‘ëŒ€</h3>
            <span class="modal-close" onclick="closeResponseModal()">&times;</span>
        </div>
        <div class="modal-body">
            <div class="modal-customer-info">
                <p><strong>ê³ ê°ëª…:</strong> <span id="modalCustomerName"></span></p>
                <p><strong>ì „í™”ë²ˆí˜¸:</strong> <span id="modalCustomerPhone"></span></p>
            </div>
            <!-- ì—¬ê¸°ì— ì¶”ê°€ ì½˜í…ì¸ ê°€ ë“¤ì–´ê°ˆ ì˜ˆì • -->
            <div id="modalResponseContent">
                <p style="text-align: center; color: #888; padding: 40px 0;">
                    ì‘ëŒ€ ë‚´ìš©ì´ ì—¬ê¸°ì— í‘œì‹œë©ë‹ˆë‹¤.
                </p>
            </div>
        </div>
        <div class="modal-footer">
            <button class="btn-secondary" onclick="closeResponseModal()">ë‹«ê¸°</button>
        </div>
    </div>
</div>

<script>
function openResponseModal(customerId, customerName, customerPhone) {
    document.getElementById('modalCustomerName').textContent = customerName;
    document.getElementById('modalCustomerPhone').textContent = customerPhone;
    document.getElementById('responseModal').style.display = 'block';
}

function closeResponseModal() {
    document.getElementById('responseModal').style.display = 'none';
}

// ëª¨ë‹¬ ì™¸ë¶€ í´ë¦­ ì‹œ ë‹«ê¸°
window.onclick = function(event) {
    const modal = document.getElementById('responseModal');
    if (event.target == modal) {
        closeResponseModal();
    }
}
</script>

        </main>
    </div>
</body>
</html>
{{end}}
