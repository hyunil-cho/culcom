{{define "customers/detail.html"}}
<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>{{.Title}} - ë°±ì˜¤í”¼ìŠ¤</title>
    <link rel="stylesheet" href="/static/css/style.css">
</head>
<body>
    {{template "sidebar" .}}
    
    <div class="main-wrapper">
        {{template "header" .}}
        
        <main class="content">
<!-- ì•¡ì…˜ ë²„íŠ¼ -->
<div class="detail-actions">
    <a href="/customers" class="btn-back">â† ëª©ë¡ìœ¼ë¡œ</a>
    <div class="action-group">
        <a href="/customers/edit?id={{.Customer.ID}}" class="btn-primary">âœï¸ ìˆ˜ì •</a>
        <button class="btn-danger" onclick="showDeleteModal('{{.Customer.Name}}', '{{.Customer.ID}}')">ğŸ—‘ï¸ ì‚­ì œ</button>
    </div>
</div>

<!-- ì‚­ì œ í™•ì¸ ëª¨ë‹¬ -->
<div id="deleteModal" class="modal">
    <div class="modal-content">
        <div class="modal-header">
            <span class="modal-icon">âš ï¸</span>
            <h3>ê³ ê° ì‚­ì œ í™•ì¸</h3>
        </div>
        <div class="modal-body">
            <p>ì •ë§ë¡œ <strong id="customerNameToDelete"></strong> ê³ ê°ì„ ì‚­ì œí•˜ì‹œê² ìŠµë‹ˆê¹Œ?</p>
            <p class="warning-text">âš ï¸ ì´ ì‘ì—…ì€ ë˜ëŒë¦´ ìˆ˜ ì—†ìŠµë‹ˆë‹¤.</p>
        </div>
        <div class="modal-footer">
            <button class="btn-modal-cancel" onclick="closeDeleteModal()">ì·¨ì†Œ</button>
            <button class="btn-modal-confirm" onclick="confirmDelete()">ì‚­ì œ</button>
        </div>
    </div>
</div>

<!-- ê³ ê° ìƒì„¸ ì •ë³´ -->
<div class="content-card">
    <div class="detail-header">
        <h2>ê¸°ë³¸ ì •ë³´</h2>
    </div>
    <div class="detail-body">
        <div class="detail-row">
            <div class="detail-label">ê³ ê°ë²ˆí˜¸</div>
            <div class="detail-value">{{.Customer.ID}}</div>
        </div>
        <div class="detail-row">
            <div class="detail-label">ì´ë¦„</div>
            <div class="detail-value"><strong>{{.Customer.Name}}</strong></div>
        </div>
        <div class="detail-row">
            <div class="detail-label">ì „í™”ë²ˆí˜¸</div>
            <div class="detail-value">{{.Customer.Phone}}</div>
        </div>
        <div class="detail-row">
            <div class="detail-label">ì´ë©”ì¼</div>
            <div class="detail-value">{{.Customer.Email}}</div>
        </div>
        <div class="detail-row">
            <div class="detail-label">ìƒíƒœ</div>
            <div class="detail-value">
                <span class="status-badge status-active">{{.Customer.Status}}</span>
            </div>
        </div>
        <div class="detail-row">
            <div class="detail-label">ê°€ì…ì¼</div>
            <div class="detail-value">{{.Customer.RegisterDate}}</div>
        </div>
        <div class="detail-row">
            <div class="detail-label">ìµœê·¼ ë°©ë¬¸</div>
            <div class="detail-value">{{.Customer.LastVisit}}</div>
        </div>
    </div>
</div>

<script>
    let customerIdToDelete = null;

    function showDeleteModal(customerName, customerId) {
        customerIdToDelete = customerId;
        document.getElementById('customerNameToDelete').textContent = customerName;
        document.getElementById('deleteModal').style.display = 'flex';
    }

    function closeDeleteModal() {
        document.getElementById('deleteModal').style.display = 'none';
        customerIdToDelete = null;
    }

    function confirmDelete() {
        if (customerIdToDelete) {
            // TODO: ì‹¤ì œ ì‚­ì œ ë¡œì§ êµ¬í˜„
            // window.location.href = '/customers/delete?id=' + customerIdToDelete;
            alert('ì‚­ì œ ê¸°ëŠ¥ì€ ì•„ì§ êµ¬í˜„ë˜ì§€ ì•Šì•˜ìŠµë‹ˆë‹¤.');
            closeDeleteModal();
        }
    }

    // ëª¨ë‹¬ ì™¸ë¶€ í´ë¦­ ì‹œ ë‹«ê¸°
    window.onclick = function(event) {
        const deleteModal = document.getElementById('deleteModal');
        
        if (event.target === deleteModal) {
            closeDeleteModal();
        }
    }
</script>
        </main>
    </div>
</body>
</html>
{{end}}
