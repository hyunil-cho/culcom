{{define "notices/edit.html"}}
<!DOCTYPE html>
<html lang="ko">
<head>
    <link rel="stylesheet" href="/static/css/notices.css">
</head>
<body>
    {{template "sidebar" .}}
    
    <div class="main-wrapper">
        {{template "header" .}}
        
        <main class="content">

<!-- ë’¤ë¡œê°€ê¸° -->
<div class="notice-detail-nav">
    <a href="/notices/detail?id={{.Notice.ID}}" class="notice-back-btn">
        <svg width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><polyline points="15 18 9 12 15 6"/></svg>
        ëŒì•„ê°€ê¸°
    </a>
</div>

{{if .ErrorMessage}}
<div class="notice-alert notice-alert-error">
    <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><circle cx="12" cy="12" r="10"/><line x1="15" y1="9" x2="9" y2="15"/><line x1="9" y1="9" x2="15" y2="15"/></svg>
    {{.ErrorMessage}}
</div>
{{end}}

<!-- ìˆ˜ì • í¼ -->
<div class="notice-form-card">
    <div class="notice-form-header">
        <h2>ğŸ“ ê¸€ ìˆ˜ì •</h2>
    </div>
    <form method="POST" action="/notices/edit?id={{.Notice.ID}}" class="notice-form">
        <div class="form-row">
            <div class="form-group form-group-half">
                <label class="form-label">ì¹´í…Œê³ ë¦¬ <span class="required">*</span></label>
                <select name="category" class="form-select">
                    <option value="ê³µì§€ì‚¬í•­" {{if eq .Notice.Category "ê³µì§€ì‚¬í•­"}}selected{{end}}>ğŸ“Œ ê³µì§€ì‚¬í•­</option>
                    <option value="ì´ë²¤íŠ¸" {{if eq .Notice.Category "ì´ë²¤íŠ¸"}}selected{{end}}>ğŸ‰ ì´ë²¤íŠ¸</option>
                </select>
            </div>
            <div class="form-group form-group-half">
                <label class="form-label">ì‘ì„±ì</label>
                <input type="text" class="form-input" value="{{.Notice.CreatedBy}}" disabled>
            </div>
        </div>

        <div class="form-group">
            <label class="form-label">ì œëª© <span class="required">*</span></label>
            <input type="text" name="title" class="form-input" value="{{.Notice.Title}}" required>
        </div>

        <div class="form-group">
            <label class="form-label">ë‚´ìš© <span class="required">*</span></label>
            <textarea name="content" class="form-textarea" rows="12" required>{{.Notice.Content}}</textarea>
        </div>

        <div class="form-row" id="eventDateRow" style="{{if ne .Notice.Category "ì´ë²¤íŠ¸"}}display: none;{{end}}">
            <div class="form-group form-group-half">
                <label class="form-label">ì´ë²¤íŠ¸ ì‹œì‘ì¼</label>
                <input type="date" name="event_start_date" class="form-input" value="{{.Notice.EventStartDate}}">
            </div>
            <div class="form-group form-group-half">
                <label class="form-label">ì´ë²¤íŠ¸ ì¢…ë£Œì¼</label>
                <input type="date" name="event_end_date" class="form-input" value="{{.Notice.EventEndDate}}">
            </div>
        </div>

        <div class="form-group">
            <label class="form-checkbox-label">
                <input type="checkbox" name="is_pinned" value="1" {{if .Notice.IsPinned}}checked{{end}}>
                <span class="checkbox-custom"></span>
                ğŸ“Œ ìƒë‹¨ ê³ ì •
            </label>
        </div>

        <div class="form-actions">
            <a href="/notices/detail?id={{.Notice.ID}}" class="btn-form-cancel">ì·¨ì†Œ</a>
            <button type="submit" class="btn-form-submit">ìˆ˜ì •í•˜ê¸°</button>
        </div>
    </form>
</div>

<script>
document.querySelector('select[name="category"]').addEventListener('change', function() {
    const eventRow = document.getElementById('eventDateRow');
    if (this.value === 'ì´ë²¤íŠ¸') {
        eventRow.style.display = 'flex';
    } else {
        eventRow.style.display = 'none';
    }
});
</script>

        </main>
    </div>
</body>
</html>
{{end}}
