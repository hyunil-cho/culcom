{{define "sidebar"}}
<aside class="sidebar">
    <div class="sidebar-header">
        <h2 id="sidebarTitle">ğŸ¢ ë°±ì˜¤í”¼ìŠ¤!!</h2>
    </div>
    <nav class="sidebar-nav">
        <a href="/dashboard" class="nav-item {{if eq .ActiveMenu "dashboard"}}active{{end}}">
            <span class="nav-icon">ğŸ“Š</span>
            <span class="nav-text">ëŒ€ì‹œë³´ë“œ</span>
        </a>
        <a href="/customers" class="nav-item {{if eq .ActiveMenu "customers"}}active{{end}}">
            <span class="nav-icon">ğŸ‘¥</span>
            <span class="nav-text">ì‹ ê·œ ê³ ê° ê´€ë¦¬</span>
        </a>
        <a href="/branches" class="nav-item {{if eq .ActiveMenu "branches"}}active{{end}}">
            <span class="nav-icon">ğŸª</span>
            <span class="nav-text">ì§€ì  ê´€ë¦¬</span>
        </a>
        <a href="/integrations" class="nav-item {{if eq .ActiveMenu "integrations"}}active{{end}}">
            <span class="nav-icon">ğŸ”—</span>
            <span class="nav-text">ì™¸ë¶€ ì—°ë™</span>
        </a>
        <a href="/message-templates" class="nav-item {{if eq .ActiveMenu "message-templates"}}active{{end}}">
            <span class="nav-icon">ğŸ“</span>
            <span class="nav-text">ë©”ì‹œì§€ í…œí”Œë¦¿</span>
        </a>
    </nav>
</aside>

<script>
// ì‚¬ì´ë“œë°” ë©”ë‰´ ë§í¬ì— í˜„ì¬ ì§€ì  íŒŒë¼ë¯¸í„° ì¶”ê°€
document.addEventListener('DOMContentLoaded', function() {
    const urlParams = new URLSearchParams(window.location.search);
    const currentBranch = urlParams.get('branch') || localStorage.getItem('selectedBranch') || 'gasan';
    
    // ëª¨ë“  ë„¤ë¹„ê²Œì´ì…˜ ë§í¬ì— ì§€ì  íŒŒë¼ë¯¸í„° ì¶”ê°€ (ì˜ë¬¸ ì½”ë“œ)
    document.querySelectorAll('.sidebar-nav .nav-item').forEach(function(link) {
        const href = link.getAttribute('href');
        if (href && !href.includes('branch=') && currentBranch) {
            const separator = href.includes('?') ? '&' : '?';
            link.setAttribute('href', href + separator + 'branch=' + encodeURIComponent(currentBranch));
        }
    });
});
</script>
{{end}}
