{{define "sidebar"}}
<aside class="sidebar">
    <div class="sidebar-header">
        <h2 id="sidebarTitle">πΆ λ°±μ¤ν”Όμ¤</h2>
    </div>
    <nav class="sidebar-nav">
        <a href="/dashboard" class="nav-item {{if eq .ActiveMenu "dashboard"}}active{{end}}">
            <span class="nav-icon">π“</span>
            <span class="nav-text">λ€μ‹λ³΄λ“</span>
        </a>
        <a href="/customers" class="nav-item {{if eq .ActiveMenu "customers"}}active{{end}}">
            <span class="nav-icon">π‘¥</span>
            <span class="nav-text">μ§€μ›μ νμ‹  κ΄€λ¦¬</span>
        </a>
        <a href="/branches" class="nav-item {{if eq .ActiveMenu "branches"}}active{{end}}">
            <span class="nav-icon">π</span>
            <span class="nav-text">μ§€μ  μ–΄λ“λ―Ό</span>
        </a>
        <a href="/integrations" class="nav-item {{if eq .ActiveMenu "integrations"}}active{{end}}">
            <span class="nav-icon">π”—</span>
            <span class="nav-text">μ™Έλ¶€ μ—°λ™</span>
        </a>
        <a href="/message-templates" class="nav-item {{if eq .ActiveMenu "message-templates"}}active{{end}}">
            <span class="nav-icon">π“</span>
            <span class="nav-text">λ©”μ‹μ§€ ν…ν”λ¦Ώ</span>
        </a>
        <a href="/settings" class="nav-item {{if eq .ActiveMenu "settings"}}active{{end}}">
            <span class="nav-icon">β™οΈ</span>
            <span class="nav-text">μ„¤μ •</span>
        </a>
    </nav>
</aside>

<script>
// μ‚¬μ΄λ“λ°” λ©”λ‰΄ λ§ν¬μ— ν„μ¬ μ§€μ  νλΌλ―Έν„° μ¶”κ°€
document.addEventListener('DOMContentLoaded', function() {
    const urlParams = new URLSearchParams(window.location.search);
    const currentBranch = urlParams.get('branch') || localStorage.getItem('selectedBranch') || 'gasan';
    
    // λ¨λ“  λ„¤λΉ„κ²μ΄μ… λ§ν¬μ— μ§€μ  νλΌλ―Έν„° μ¶”κ°€ (μλ¬Έ μ½”λ“)
    document.querySelectorAll('.sidebar-nav .nav-item').forEach(function(link) {
        const href = link.getAttribute('href');
        if (href && !href.includes('branch=') && currentBranch) {
            const separator = href.includes('?') ? '&' : '?';
            link.setAttribute('href', href + separator + 'branch=' + encodeURIComponent(currentBranch));
        }
    });
});
</script>
{{end}}
